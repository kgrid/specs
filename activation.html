<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KGrid Common Activation Specifications | Knowledge Grid Specifications</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/specs/assets/css/0.styles.9cdcb7cf.css" as="style"><link rel="preload" href="/specs/assets/js/app.5515ff1c.js" as="script"><link rel="preload" href="/specs/assets/js/2.3dc1b8de.js" as="script"><link rel="preload" href="/specs/assets/js/1.7f771cfb.js" as="script"><link rel="preload" href="/specs/assets/js/22.15d8f113.js" as="script"><link rel="prefetch" href="/specs/assets/js/10.23a1f579.js"><link rel="prefetch" href="/specs/assets/js/11.c389195a.js"><link rel="prefetch" href="/specs/assets/js/12.1d996921.js"><link rel="prefetch" href="/specs/assets/js/13.4d4410c4.js"><link rel="prefetch" href="/specs/assets/js/14.37ef2a72.js"><link rel="prefetch" href="/specs/assets/js/15.5542c093.js"><link rel="prefetch" href="/specs/assets/js/16.d48fd1ce.js"><link rel="prefetch" href="/specs/assets/js/17.bd8d538c.js"><link rel="prefetch" href="/specs/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/specs/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/specs/assets/js/20.c11ec329.js"><link rel="prefetch" href="/specs/assets/js/21.db1b5d88.js"><link rel="prefetch" href="/specs/assets/js/23.37bc884b.js"><link rel="prefetch" href="/specs/assets/js/24.bd12738d.js"><link rel="prefetch" href="/specs/assets/js/25.3e0527be.js"><link rel="prefetch" href="/specs/assets/js/26.2d5985a6.js"><link rel="prefetch" href="/specs/assets/js/27.55e7d8a2.js"><link rel="prefetch" href="/specs/assets/js/28.2a784fa8.js"><link rel="prefetch" href="/specs/assets/js/29.7877233e.js"><link rel="prefetch" href="/specs/assets/js/3.5322f14a.js"><link rel="prefetch" href="/specs/assets/js/30.f692d0c2.js"><link rel="prefetch" href="/specs/assets/js/31.ad36ceeb.js"><link rel="prefetch" href="/specs/assets/js/32.d025cd67.js"><link rel="prefetch" href="/specs/assets/js/4.84e1e480.js"><link rel="prefetch" href="/specs/assets/js/5.f0541060.js"><link rel="prefetch" href="/specs/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/specs/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/specs/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/specs/assets/css/0.styles.9cdcb7cf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/specs/" class="home-link router-link-active"><img src="/specs/images/kgrid-logo.png" alt="Knowledge Grid Specifications" class="logo"> <span class="site-name can-hide">Knowledge Grid Specifications</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://kgrid.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KGrid.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Specifications" class="dropdown-title"><span class="title">Specifications</span> <span class="arrow down"></span></button> <button type="button" aria-label="Specifications" class="mobile-dropdown-title"><span class="title">Specifications</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/specs/packaging.html" class="nav-link">
  KGrid Common Package
</a></li><li class="dropdown-item"><!----> <a href="/specs/activation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  KGrid Activation
</a></li><li class="dropdown-item"><!----> <a href="/specs/runtimes.html" class="nav-link">
  KGrid Runtime Adapters
</a></li><li class="dropdown-item"><!----> <a href="/specs/shelf-api.html" class="nav-link">
  KGrid Shelf API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/kgrid/koio" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KOIO
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/kgrid/specs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://kgrid.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KGrid.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Specifications" class="dropdown-title"><span class="title">Specifications</span> <span class="arrow down"></span></button> <button type="button" aria-label="Specifications" class="mobile-dropdown-title"><span class="title">Specifications</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/specs/packaging.html" class="nav-link">
  KGrid Common Package
</a></li><li class="dropdown-item"><!----> <a href="/specs/activation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  KGrid Activation
</a></li><li class="dropdown-item"><!----> <a href="/specs/runtimes.html" class="nav-link">
  KGrid Runtime Adapters
</a></li><li class="dropdown-item"><!----> <a href="/specs/shelf-api.html" class="nav-link">
  KGrid Shelf API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/kgrid/koio" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KOIO
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/kgrid/specs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>KGrid Common Activation Specifications</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/specs/activation.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/specs/activation.html#responsibilities-of-the-activator" class="sidebar-link">Responsibilities of the Activator (...)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/specs/activation.html#purpose" class="sidebar-link">Purpose</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/specs/activation.html#" class="sidebar-link">...</a></li></ul></li><li><a href="/specs/activation.html#status-of-this-document" class="sidebar-link">Status of this document</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/specs/activation.html#request-api" class="sidebar-link">Request API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/specs/activation.html#activation-api" class="sidebar-link">Activation API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/specs/activation.html#activation-on-startup" class="sidebar-link">Activation on startup</a></li></ul></li><li><a href="/specs/activation.html#shelf-api-read-only" class="sidebar-link">Shelf API (read-only)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/specs/activation.html#list-ko-resources" class="sidebar-link">List KO resources</a></li><li class="sidebar-sub-header"><a href="/specs/activation.html#get-an-individual-ko-resource" class="sidebar-link">Get an individual KO resource</a></li><li class="sidebar-sub-header"><a href="/specs/activation.html#get-a-versioned-individual-ko-resource" class="sidebar-link">Get a versioned individual KO resource</a></li></ul></li><li><a href="/specs/activation.html#application-and-health-information" class="sidebar-link">Application and Health Information</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/specs/activation.html#health-required" class="sidebar-link">/health (Required)</a></li><li class="sidebar-sub-header"><a href="/specs/activation.html#info-optional" class="sidebar-link">/info (Optional)</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="kgrid-common-activation-specifications"><a href="#kgrid-common-activation-specifications" class="header-anchor">#</a> KGrid Common Activation Specifications</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>The Activator is a reference implementation of the <strong>activation</strong> spec. This specification focuses on client interactions and integration with with various client systems. See runtime adapter development guide for more on how an Activator manages and interacts with runtimes.</p> <h2 id="responsibilities-of-the-activator"><a href="#responsibilities-of-the-activator" class="header-anchor">#</a> Responsibilities of the Activator (...)</h2> <ul><li>provide access (HTTP Restful API) to the services (exposed as endpoints) from knowledge objects deployed to the Activator</li> <li>Provide status for associated runtimes, KOs deployed, and the Activator itself</li> <li>Allow KOs to be loaded/activated from local and remote source (in suitable runtimes)</li> <li>Manage and interface with suitable runtimes — embedded, native, remote (proxy)</li> <li>Enforce some aspects of trust, provenance, and reproducibility via policy, validation, and tracing/logging.</li></ul> <h2 id="purpose"><a href="#purpose" class="header-anchor">#</a> Purpose</h2> <p>Systems are being designed and built to help move biomedical knowledge into practice more quickly, more broadly, more accurately than ever before. Those systems will rely on long-term access and management of compound digital objects within digital repositories, and deployment and integration of these objects as services in a broad class of runtimes (See KGRID Activation Spec). This requires infrastructural standards and specifications that enable integration at scale.</p> <p>This spec represents our recommendations on how to meet the following needs:</p> <h3 id=""><a href="#" class="header-anchor">#</a> ...</h3> <h2 id="status-of-this-document"><a href="#status-of-this-document" class="header-anchor">#</a> Status of this document</h2> <p>This document is draft of a potential specification. It has no official standing of any kind and does not represent the support or consensus of any standards organisation.</p> <h1 id="_1-conformance"><a href="#_1-conformance" class="header-anchor">#</a> 1. Conformance</h1> <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p> <p>The key words <conform>may</conform>, <conform>must</conform>, <conform>must not</conform>, <conform>should</conform>, and <conform>should not</conform> are to be interpreted as described in [RFC2119].</p> <h1 id="_2-terminology"><a href="#_2-terminology" class="header-anchor">#</a> 2. Terminology</h1> <p>See [KOIO] for matching ontology terms....</p> <h4 id="knowledge-object-ko"><a href="#knowledge-object-ko" class="header-anchor">#</a> Knowledge Object (KO):</h4> <p>A collection of metadata and binary files that together have a unique identifier (including version identifier). There are three required file types: a service description, a deployment description, and one or more payload files implementing the service described by the service description, deployable using the information in the deployment description. See [Activation Spec] for details of the roles of the these files.</p> <blockquote><p>KOIO term — koio:KnowledgeObject</p></blockquote> <h4 id="shelf"><a href="#shelf" class="header-anchor">#</a> Shelf:</h4> <p>The Knowledge Grid provides repository capabilities using a abstraction called the &quot;Shelf.&quot; KOs are added to and managed for storage and retrieval through the Shelf API. Different concrete implementations of physical storage for KOs are available and not all capabilities are implemented in every component. See <a href="/specs/shelf-api.html">Shelf API</a>.</p> <h4 id="ko-endpoint"><a href="#ko-endpoint" class="header-anchor">#</a> KO Endpoint:</h4> <p>A service path exposed by a particular knowledge object. Takes the form <code>/naan/name/endpoint</code>.</p> <h4 id="archival-resource-key-ark"><a href="#archival-resource-key-ark" class="header-anchor">#</a> Archival Resource Key (ARK):</h4> <p>The Knowledge Grid currently uses <a href="https://n2t.net/e/ark_ids.html" target="_blank" rel="noopener noreferrer">ARK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> identifiers natively which interoperate with <a href="http://ezid.cdlib.org" target="_blank" rel="noopener noreferrer">EZID<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and top-level resolvers like <a href="http://www.n2t.net" target="_blank" rel="noopener noreferrer">Name2Thing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://www.identifiers.org" target="_blank" rel="noopener noreferrer">Identifiers.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. (Support for other identifiers like <a href="http://www.doi.org" target="_blank" rel="noopener noreferrer">DOI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>s is planned).</p> <h4 id="manifest"><a href="#manifest" class="header-anchor">#</a> Manifest:</h4> <p>A representation of a collection knowledge object resources. The <em>minimal</em> representation is an array of KO metadata JSON-LD objects with an <code>@id</code> property.</p> <h4 id="activation"><a href="#activation" class="header-anchor">#</a> Activation:</h4> <p>THe process of deploying an implementation of a KO into a suitable runtime enviromnment in order to make the service endpoints (described in the service description available in the Activator API for use by client applications.</p> <h4 id="runtime"><a href="#runtime" class="header-anchor">#</a> Runtime</h4> <p>An environment capable of running the code for a particular class of KOs. Runtimes <conform>may</conform> be embbeded in an (custom) Adapter, or <conform>may</conform> communicate with the Activator through a (custom) Native or Proxy Adapter. THe refence imlementation of the Activator ships with an embedded Javascrip-runtime Adapter; also see <a href="">Activator/Runtime deployment guide</a></p> <h4 id="adapter"><a href="#adapter" class="header-anchor">#</a> Adapter</h4> <p>Adapters allow particular Runtimes to interact with the Activator in order to deploy and run the code from a KO. An Adapter <conform>may</conform> handle initialization and registration of a runtime, provide access to the overall activation context and active endpoints, route client requests to <a href="">KO Endpoints</a>, and shutdown. Adapters implement the Adapter interface. See <a href="">Developing Runtimes</a> and the documentation for your specific Runtime/Adapter combination.</p> <h1 id="_3-apis"><a href="#_3-apis" class="header-anchor">#</a> 3. APIs</h1> <h2 id="request-api"><a href="#request-api" class="header-anchor">#</a> Request API</h2> <p>The Request API exposes the <em>micro</em>-API for the services provide by each KO.</p> <h5 id="service-description"><a href="#service-description" class="header-anchor">#</a> Service Description</h5> <div class="language-http request extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">/kos/{naan}/{name}/sevice</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Accept</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
</code></pre></div><p>The OpenAPI 3 service description returned describes all the endpoints implemented by this KO.</p> <h5 id="request-for-each-endpoint"><a href="#request-for-each-endpoint" class="header-anchor">#</a> Request (for each endpoint)</h5> <div class="language- extra-class"><pre class="language-text"><code>POST /kos/{naan}/{name}/{endpoint} HTTP/1.1
Accept: application/json
Content-type: application/json

{&quot;age&quot;:48,&quot;gender&quot;:&quot;Female&quot;,&quot;risk&quot;:&quot;low&quot;,&quot;sbp&quot;:120,&quot;cholesterol&quot;:8,&quot;smoker&quot;:false}
</code></pre></div><p><code>Accept:</code> and <code>Content-type:</code> headers are required, and <conform>should</conform> be <code>application/json</code></p> <p><proposed>(proposed)</proposed> Allow any mime-type specified in service description.</p> <h5 id="response"><a href="#response" class="header-anchor">#</a> Response:</h5> <p>The response is wrapped in a JSON object. The actual KO result is available under the <code>result:</code> key.</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200 OK
Content-type: application/json
{
  &quot;result&quot;: {
    &quot;cvdrisk&quot;: {
      &quot;total&quot;: 0.0026555542778455843,
      &quot;chd&quot;: 0.0017632437883150498,
      &quot;nonchd&quot;: 8.923104895305345E-4
    }
  },
  &quot;info&quot;: {
    &quot;ko&quot;: {
      &quot;@id&quot;: &quot;score-calc&quot;,
      &quot;@type&quot;: &quot;koio:KnowledgeObject&quot;,
      &quot;identifier&quot;: &quot;ark:/score/calc&quot;,
      &quot;version&quot;: &quot;v0.3.0&quot;,
      &quot;title&quot;: &quot;Ten-year Fatal Cardiovascular Risk Calculation based on SCORE project (Example KO - Bundled with a npm package) &quot;,
      &quot;description&quot;: &quot;Estimating ten-year risk of fatal cardiovascular disease based on SCORE project. This version bundled the javascript code with externalized data files and a Node.js library of 'lodash'&quot;,
      &quot;keywords&quot;: [
        &quot;SCORE, ten-year&quot;,
        &quot;Cardiovascular risk&quot;,
        &quot;calculation&quot;
      ],
      &quot;hasServiceSpecification&quot;: &quot;service.yaml&quot;,
      &quot;hasDeploymentSpecification&quot;: &quot;service.yaml&quot;,
      &quot;hasPayload&quot;: &quot;dist/main.js&quot;,
      &quot;@context&quot;: [
        &quot;http://kgrid.org/koio/contexts/knowledgeobject.jsonld&quot;
      ]
    },
    &quot;inputs&quot;: {
      &quot;age&quot;: 48,
      &quot;gender&quot;: &quot;Female&quot;,
      &quot;risk&quot;: &quot;low&quot;,
      &quot;sbp&quot;: 120,
      &quot;cholesterol&quot;: 8,
      &quot;smoker&quot;: false
    }
  }
}
</code></pre></div><p><proposed>(proposed)</proposed> Return KO output and link to provenance, tracing, etc.
Response code: HTTP/1.1 200</p> <h5 id="errors"><a href="#errors" class="header-anchor">#</a> Errors:</h5> <p>A custom problem details resource is returned and the KO problem details or exception message will be included in the <code>Detail:</code> property.</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;Status&quot;: &quot;500 Internal Server Error&quot;,
  &quot;Instance&quot;: &quot;uri=/score/calc/v0.3.0/score&quot;,
  &quot;Title&quot;: &quot;Error&quot;,
  &quot;Time&quot;: &quot;Fri Jun 19 16:21:23 UTC 2020&quot;,
  &quot;Detail&quot;: &quot;JSON parse error: Unexpected character ('{' (code 123)): was...&quot;
}
</code></pre></div><p><proposed>(proposed)</proposed> Use <a href="https://tools.ietf.org/html/rfc7807" target="_blank" rel="noopener noreferrer">Problem Details for HTTP APIs — rfc7807<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and wrap any underlying KO response problem details.</p> <h5 id="ko-endpoint-micro-apis"><a href="#ko-endpoint-micro-apis" class="header-anchor">#</a> KO endpoint micro-APIs</h5> <p>The KO micro-API <conform>should</conform> be completely specified by the OpenAPI 3 service description. Clients rely on the service to use the API.</p> <ul><li>Each KO endpoint <conform>must</conform> accept inputs as spec'ed by the service description for a specific mime-type.</li> <li>KO endpoints <conform>may</conform> do their own validation. They <conform>should</conform> not rely entirely on <proposed>(proposed)</proposed> Activator validation</li> <li>Each KO endpoint <conform>must</conform> produce outputs as spec'ed by the service description for a specific mime-type. An output schema <conform>should</conform> be specificied. If not clients will have to handle outputs of arbitrary complexity.</li> <li>If the knowledge object can't service the request it <conform>should</conform> use a well-defined scheme for responses (codes, error messages, etc.) The activator wraps KO error responses unchanged.</li> <li>Individual KOs and endpoints <conform>must</conform> be stateless.</li> <li>KOs <conform>may</conform> specifiy and use any properties in the deployment description depending on the particualr runtime.</li> <li>Endpoint paths <conform>may</conform> be arbitrarly complex within the KO but <conform>must</conform> be unique.</li> <li>Each KO <conform>may</conform> have multiple endpoints as long as the full path is unique.</li></ul> <h2 id="activation-api"><a href="#activation-api" class="header-anchor">#</a> Activation API</h2> <h5 id="endpoint-resources"><a href="#endpoint-resources" class="header-anchor">#</a> Endpoint resources</h5> <p><code>/endpoints</code></p> <p><code>/endpoints/{naan}/{name}</code></p> <p><code>/endpoints/{naan}/{name}/{endpoint}</code></p> <h3 id="activation-on-startup"><a href="#activation-on-startup" class="header-anchor">#</a> Activation on startup</h3> <h5 id="loading-the-shelf"><a href="#loading-the-shelf" class="header-anchor">#</a> Loading the shelf</h5> <ul><li>If <code>kgrid.shelf.manifest</code> is set, the activator (shelf) will try to populate the shelf from the specified manifest(s).</li> <li>Existing KOs on the shelf will not be deleted and <conform>may</conform> be overwritten.</li></ul> <h5 id="proposed-if-kgrid-activator-allowruntimeimport-is-true"><a href="#proposed-if-kgrid-activator-allowruntimeimport-is-true" class="header-anchor">#</a> <proposed>(proposed)</proposed> If <code>kgrid.activator.allowRuntimeImport</code> is <code>true</code></h5> <ul><li>While running the Activator packaged KO (zip file) can be uploaded to the <code>/kos</code> endpoint to add a KO to the shelf</li> <li>While running the Activator a <code>manifest</code> (json or yaml) can be POSTed to the <code>/kos</code> endpoint to initiate loading of one or more KOs from an external path (See <a href="">Loading KOs onto the Shelf</a> in the Kgrid Shelf documentation))</li></ul> <blockquote><p>As KOs are added to the shelf, a warning is logged for each KO that is unreadable or malformed (e.g. missing <code>metadata.json</code> or deployment description)</p></blockquote> <h5 id="proposed-if-kgrid-activator-autoactivateonstartup-is-true"><a href="#proposed-if-kgrid-activator-autoactivateonstartup-is-true" class="header-anchor">#</a> <proposed>(proposed)</proposed> If <code>kgrid.activator.autoActivateOnStartup</code> is <code>true</code></h5> <blockquote><p>Currently behaves as if <code>kgrid.activator.autoActivateOnStartup</code> is <code>true</code> by default</p></blockquote> <ul><li>On startup the Activator attempts to activated every KO on the shelf</li></ul> <blockquote><p>Once a KO has been activated, any activated endpoints will remain functional even if the KO is deleted, unless or until the activation state is refreshed (using <code>/refresh</code> or <code>/refresh/{naan}/{name}</code>). Likewise new KOs added to the shelf will <em>NOT</em> be activated unless or until the activation state is refreshed (using <code>/refresh</code> or <code>/refresh/{naan}/{name}</code>).</p></blockquote> <h5 id="runtime-activation-via-refresh"><a href="#runtime-activation-via-refresh" class="header-anchor">#</a> Runtime activation via <code>/refresh</code></h5> <ul><li><code>/refresh</code> — all current activations are discarded and the startup activation sequencce tries to activate every KO on the shelf</li> <li><code>/refresh/{naan}/{name}</code> — all current activations for the default version given KO are discarded and the KO is reactivated</li> <li><code>/refresh/{naan}/{name}/{version}</code> — all current activations for the given version KO are discarded and the KO is reactivated</li></ul> <h5 id="on-every-activation"><a href="#on-every-activation" class="header-anchor">#</a> On every activation</h5> <ul><li>When a KO is activated, a warning is logged for every endpoint that cannot be activated</li> <li>(verify) If two endpoints have identical coordinates (<code>/{naan}/{name}/{version}/{endpoint}</code>) the second endpoint will not be loaded and a warning will be logged. Compliant implementations <conform>must not</conform> allow multiple endpoints and <conform>must not</conform> have endpoint  unspecified request routing behavior.</li> <li>Each activated endpoint is provided with a context object containing global activation properties and a means to resolve and access other endpoints in the same runtime or activator.</li></ul> <h2 id="shelf-api-read-only"><a href="#shelf-api-read-only" class="header-anchor">#</a> Shelf API (read-only)</h2> <p>An Activator <conform>must</conform> implement at least the read-only portion of the <a href="/specs/shelf-api.html">Shelf API</a>. This includes listing KOs, returning representations of indivdual KOs (e.g. metadata only, with links to key components).</p> <p><proposed>(proposed)</proposed> An activator <conform>must</conform> provide a resource representation for the knowledge object that includes activation status and endpoints.</p> <p><proposed>(proposed)</proposed> An Activator <conform>should</conform> make available the service description for a knowledge object.</p> <p><proposed>(proposed)</proposed> Access to the internals of the KO (deployment and payload files) <conform>should not</conform> be exposed, except that KOs of &quot;resource&quot; type <conform>may</conform> specify particular payloads for client access under appropriate service paths in the service description.</p> <p><proposed>(proposed)</proposed> An activator <conform>may</conform> implement additional operations for the Shelf API to support development or demonstration of KOs. For example, uploading or importing KOs, loading KOs from a manifest file, deleting KOs. See <a href="/specs/shelf-api.html">Shelf API</a> for more info.</p> <p><proposed>(proposed)</proposed> It is especially useful for Activators used in protyping and demonstration to allow a manfifest to be posted to the activator in prder to load KOs at runtime. This <conform>should not</conform> be enabled by default except in development environments as it representas an vulnberabiltiy.</p> <h3 id="list-ko-resources"><a href="#list-ko-resources" class="header-anchor">#</a> List KO resources</h3> <div class="language- extra-class"><pre class="language-text"><code>GET /kos HTTP/1.1
Accept: application/json
</code></pre></div><p>Returns a list of knowledge object resources in a minimal representation.</p> <p><proposed>(proposed)</proposed> Returns a KO manifest</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200
Content-Type: application/json
[{
&quot;@id&quot;: &quot;ipp-lowercholesterol&quot;,
&quot;@type&quot;: &quot;koio:KnowledgeObject&quot;,
...
},
{
&quot;@id&quot;: &quot;99999-fk4md04x9z&quot;,
&quot;@type&quot;: &quot;koio:KnowledgeObject&quot;,
...
}]
</code></pre></div><h3 id="get-an-individual-ko-resource"><a href="#get-an-individual-ko-resource" class="header-anchor">#</a> Get an individual KO resource</h3> <div class="language- extra-class"><pre class="language-text"><code>GET /kos/{naan}/{name} HTTP/1.1
Accept: application/json
</code></pre></div><h3 id="get-a-versioned-individual-ko-resource"><a href="#get-a-versioned-individual-ko-resource" class="header-anchor">#</a> Get a versioned individual KO resource</h3> <div class="language- extra-class"><pre class="language-text"><code>GET /kos/{naan}/{name}/{version} HTTP/1.1
Accept: application/json
</code></pre></div><p>Returns a single knowledge object resource in a minimal representation. If a version is supplied that version is returned. If no version is supplied and multiple versions of the object exist in the Activator the current default version for requests is returned (the version will be available in the returned metadata representation). See <a href="">#Default KO versions</a> for more info.</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200
Content-Type: application/json
[{
&quot;@id&quot;: &quot;ipp-lowercholesterol&quot;,
&quot;@type&quot;: &quot;koio:KnowledgeObject&quot;,
...
},
{
&quot;@id&quot;: &quot;99999-fk4md04x9z&quot;,
&quot;@type&quot;: &quot;koio:KnowledgeObject&quot;,
...
}]
</code></pre></div><h2 id="application-and-health-information"><a href="#application-and-health-information" class="header-anchor">#</a> Application and Health Information</h2> <p>Activators <conform>should</conform> provide application and health information via <code>/health</code> and <code>/info</code> endpoints.</p> <h3 id="health-required"><a href="#health-required" class="header-anchor">#</a> <code>/health</code> (Required)</h3> <p>The health enpoint <conform>must</conform> provide a <code>{ &quot;status&quot;: &quot;&lt;UP|DOWN&gt;&quot; } response at a minimum. The</code>/health` endpoint <conform>should</conform>  indicate the status of individual components (adapters, shelf cdo store, runtimes, KOs and their activation status) to aid montioring in troubleshooting Activator deployments.</p> <p>We suggest following the conventions in the <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-health" target="_blank" rel="noopener noreferrer">Spring Boot production health information guidelines<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Health information <conform>should</conform> focus on details that help understand wy the Activator or a component is <code>up</code> or <code>down</code>. Extended information <conform>may</conform> be made available under an <code>/info</code> endpoint. See <code>/info</code> below.</p> <div class="language- extra-class"><pre class="language-text"><code>GET /health HTTP/1.1
Accept: application/json
</code></pre></div><p>An <code>UP</code> response returns an overall status and a map of indivdual componet statuses:</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200
Content-type: application/json
{
  &quot;status&quot;: &quot;UP&quot;,
  &quot;components&quot;: {
    &quot;activationService&quot;: {
      &quot;status&quot;: &quot;UP&quot;,
      &quot;details&quot;: {
        &quot;kos&quot;: 0,
        &quot;endpoints&quot;: 0
      }
    },
    &quot;diskSpace&quot;: {
      &quot;status&quot;: &quot;UP&quot;,
      &quot;details&quot;: {
        &quot;total&quot;: 500068036608,
        &quot;free&quot;: 336108306432,
        &quot;threshold&quot;: 10485760,
        &quot;exists&quot;: true
      }
    },
    &quot;org.kgrid.adapter.javascript.JavascriptAdapter&quot;: {
      &quot;status&quot;: &quot;UP&quot;,
      &quot;details&quot;: {
        &quot;type&quot;: &quot;JAVASCRIPT&quot;,
        &quot;created&quot;: &quot;2020-06-18T18:07:52.492425Z&quot;
      }
    },
    ...
  }
}
</code></pre></div><p>A <code>DOWN</code> response returns:</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 503
Content-type: application/json
{
  &quot;status&quot;: &quot;UP&quot;,
  &quot;components&quot;: {
    &quot;activationService&quot;: {
      &quot;status&quot;: &quot;UP&quot;
    },{
      &quot;org.kgrid.adapter.javascript.JavascriptAdapter&quot;: {
      &quot;status&quot;: &quot;DOWN&quot;
    },
      ...
}
</code></pre></div><p>An Activator implementation <conform>may</conform> use additional statuses as needed which can be documented for deployers, etc.</p> <h3 id="info-optional"><a href="#info-optional" class="header-anchor">#</a> <code>/info</code> (Optional)</h3> <p>Additional or extended information about the operating characteristics of the Activator can be made available under an <code>/info</code> endpoint. See <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-application-info" target="_blank" rel="noopener noreferrer">Spring Boot application health information guidelines<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for examples of suitable patterns which can be implemented in many different frameworks and languages.</p> <p>We suggest that implementations provide things like a list of adapters and runtimes currently deployed, as well as counts or lists of KOs available to the Activator, endpoints activated, perhaps total requests, uptime, build information, key environemnt variables, etc.</p> <p>Be careful not to expose sensitive information. The <code>/health</code> and <code>/info</code> endpoints <conform>should</conform> be secured (e.g. with OAuth 2.0 Bearer Tokens).</p> <p>The <code>/info</code> endpoint <conform>should</conform> return a map of information sets in JSON or YAML.</p> <p>##Notes
If a KO is changed, the activator will have to be restarted to see the
changes take effect.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/20/2023, 10:35:10 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/specs/assets/js/app.5515ff1c.js" defer></script><script src="/specs/assets/js/2.3dc1b8de.js" defer></script><script src="/specs/assets/js/1.7f771cfb.js" defer></script><script src="/specs/assets/js/22.15d8f113.js" defer></script>
  </body>
</html>
